C251 COMPILER V5.60.0,  park                                                               20/03/25  16:34:12  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE park
OBJECT MODULE PLACED IN .\Out_File\park.obj
COMPILER INVOKED BY: D:\Keil_v5\C251\BIN\C251.EXE ..\USER\src\park.c XSMALL INTR2 WARNINGLEVEL(3) BROWSE INCDIR(..\..\Li
                    -braries\libraries;..\..\Libraries\seekfree_libraries;..\..\Libraries\seekfree_peripheral;..\CODE;..\USER\inc;..\USER\src
                    -) DEBUG PRINT(.\Out_File\park.lst) TABS(2) OBJECT(.\Out_File\park.obj) 

stmt  level    source

    1          #include "park.h"
    2          #include "math.h"
    3          
    4          int8   flag_start           = 0;    //å‡ºåº“å®Œæˆæ ‡å¿—ä½
    5          int8   flag_open_reed       = 0;    //æ‰“å¼€å¹²ç°§ç®¡
    6          int8   reed_state           = 0;    //å¹²ç°§ç®¡çŠ¶æ€
    7          int8   flag_end             = 0;    //å¼€å§‹åœè½¦æ ‡å¿—ä½
    8          uint16 T_outku              = 0;    //å‡ºåº“ç›´èµ°å’Œæ‰“è§’å®šæ—¶
    9          uint16 J_outku              = 0;
   10          uint16 T_inku_wait=0;
   11          uint16 T_inku_J=0;
   12          uint16 T_inku_S=0;
   13          uint16 T_inku=0;
   14          
   15          uint16 S_daoku              = 0;    //
   16          uint16 S_daoku_2              = 0;    //
   17          uint16 S_daoku_3              = 0;    //
   18          
   19          uint8 Library_selection = 1;
   20          
   21          /*****************************************å‡ºåº“å‡½æ•°***************************************
   22          å‡½æ•°ï¼š  void Handle_Barn_Out(uint8 type) 
   23          å‚æ•°ï¼š  type-----1ä¸ºå·¦å‡ºåº“ï¼Œ2ä¸ºå³å‡ºåº“
   24          è¯´æ˜Žï¼š  å‡ºåº“å‡½æ•°
   25          
   26          *æ³¨æ„ï¼šè°ƒç”¨æ­¤å‡½æ•°åŽæ‰§è¡Œå‡ºåº“æ“ä½œï¼Œç›´èµ°çš„æ—¶é—´å’Œæ‰“è§’æ—¶é—´åŠå ç©ºæ¯”æŒ‰éœ€è‡ªå·±ä¿
             -®æ”¹è°ƒè¯•
   27          è¿”å›žå€¼ï¼šæ—   
   28          ******************************************************************************************/
   29          void Handle_Barn_Out(uint8 type)
   30          {
   31   1        //1ä¸ºå·¦å‡ºåº“ï¼Œ2ä¸ºå³å‡ºåº“
   32   1          if(type ==1)
   33   1          {
   34   2           if(!flag_start)
   35   2           {
   36   3              //pwm_duty(PWMB_CH1_P74,STEER_MID);              //ï¼ˆCè½¦ç”¨ï¼‰
   37   3             go_motor(1500, 1500);        //å¼€çŽ¯ç”µæ± ç”µåŽ‹å¯¹è½¬é€Ÿå³å½±å“ï¼Œå°½é‡ç”¨æ»¡ç”µçš„ç”µæ± è°ƒ
   38   3             if(T_outku >= T_OUT_PARK1)   //T_OUT_PARK1----å‡ºåº“ç›´èµ°çš„æ—¶é—´
   39   3             {
   40   4               //pwm_duty(PWMB_CH1_P74,STEER_MID+STEER_LIM);  //ï¼ˆCè½¦ç”¨ï¼‰
   41   4               go_motor(0, 2000);         //å·¦æ‰“è§’
   42   4               //ips114_showuint16(0,1,J_outku);
   43   4             }
   44   3             if(T_outku > T_OUT_PARK2)  //T_OUT_PARK2----å‡ºåº“æ‰“è§’æ—¶é—´ï¼ˆæ‰“è§’æ—¶é—´ä¸ºT_OUT_PARK2-T_OUT_PAR
             -K1ï¼‰
   45   3             {
   46   4                flag_start = 1;
   47   4                T_outku=0;
   48   4             }    
   49   3            } 
   50   2          }
   51   1          if(type ==2)
   52   1          {
   53   2            if(!flag_start)
   54   2            {
   55   3              //pwm_duty(PWMB_CH1_P74,STEER_MID);            //ï¼ˆCè½¦ç”¨ï¼‰
C251 COMPILER V5.60.0,  park                                                               20/03/25  16:34:12  PAGE 2   

   56   3             go_motor(1500, 1500);
   57   3             if (T_outku >= T_OUT_PARK1) 
   58   3             {
   59   4               //pwm_duty(PWMB_CH1_P74,STEER_MID+STEER_LIM); //ï¼ˆCè½¦ç”¨ï¼‰
   60   4               go_motor(2000, 0);  //å³æ‰“è§’
   61   4             }
   62   3             if(T_outku > T_OUT_PARK2)
   63   3             {
   64   4                flag_start = 1;
   65   4                T_outku=0;
   66   4             }                              
   67   3            }
   68   2          }
   69   1      }
   70          /*****************************************å¹²ç°§ç®¡æ£€æµ‹åœè½¦***************************************
   71          å‡½æ•°ï¼š  void Reed(void) 
   72          å‚æ•°ï¼š  void
   73          è¯´æ˜Žï¼š  å¹²ç°§ç®¡æ£€æµ‹åœè½¦
   74          
   75          *æ³¨æ„ï¼š å¹²ç°§ç®¡ä½¿ç”¨æ–¹æ³•å°±å’ŒæŒ‰é”®ç±»ä¼¼ï¼Œé€šè¿‡è¯»å–IOå£ç”µå¹³å³å¯
   76          è¿”å›žå€¼ï¼švoid  
   77          *********************************************************************************************/
   78          void Reed(void)
   79          {
   80   1        if(flag_start)//å¼€å§‹æ—¶ä¸å¼€å¯å¹²ç°§ç®¡æ£€æµ‹ï¼Œé˜²æ­¢å‡ºåº“æ—¶è¯¯æµ‹
   81   1        {
   82   2          //èµ°è¿‡ä¸€æ®µè·ç¦»åŽå¼€å¯å¹²ç°§ç®¡æ£€æµ‹
   83   2          if(Open_pack_time > START_T)
   84   2          {
   85   3            flag_open_reed = 1;
   86   3            Open_pack_time=0;
   87   3          }
   88   2        }
   89   1        if(flag_open_reed==0)             //å¹²ç°§ç®¡æ£€æµ‹æ ‡å¿—ä½æˆç«‹åŽæ‰å¼€å§‹æ£€æµ‹
   90   1        {
   91   2          reed_state = Reed_Switch_Pin;//å¹²ç°§ç®¡çŠ¶æ€
   92   2          if(reed_state==0)
   93   2          {
   94   3            flag_end += 1;              //è¯†åˆ«åˆ°åœè½¦æ ‡å¿—ä½å¼€å¯
   95   3          }
   96   2         }
   97   1      }
   98          /*****************************************å…¥åº“å‡½æ•°***************************************
   99          å‡½æ•°ï¼š  void Reed(void) 
  100          å‚æ•°ï¼š  void
  101          è¯´æ˜Žï¼š  å…¥åº“å‡½æ•°
  102          
  103          
  104          è¿”å›žå€¼ï¼švoid  
  105          *********************************************************************************************/
  106          void In_park(uint8 type)
  107          {
  108   1        if(type ==1)
  109   1        {
  110   2          if(flag_end==1)
  111   2          {
  112   3            go_motor(0,0);
  113   3            aim_speed =0;
  114   3            while(1)
  115   3            {
  116   4              speed_measure();      //ç¼–ç å™¨æµ‹é‡
  117   4              S_daoku += fabs(real_speed)*0.1;
  118   4              go_motor(-1500,-1500);
  119   4              ips114_showint16(0,3,S_daoku);
  120   4              BUZZ_ON;
  121   4              while(S_daoku>450)
C251 COMPILER V5.60.0,  park                                                               20/03/25  16:34:12  PAGE 3   

  122   4              {
  123   5                speed_measure();      //ç¼–ç å™¨æµ‹é‡
  124   5                go_motor(1500,1500);
  125   5                S_daoku_2+= fabs(real_speed)*0.1;
  126   5                ips114_showint16(0,4,S_daoku_2);
  127   5                while(S_daoku_2>100)
  128   5                {
  129   6                  speed_measure();      //ç¼–ç å™¨æµ‹é‡
  130   6                  go_motor(0,2000);
  131   6                  S_daoku_3+= fabs(real_speed)*0.1;
  132   6                  ips114_showint16(0,5,S_daoku_3);
  133   6                  while(S_daoku_3>150)
  134   6                  { 
  135   7                   go_motor(0,0);
  136   7                   BUZZ_OFF;
  137   7                  }
  138   6                }
  139   5              }
  140   4            }
  141   3          }
  142   2       }
  143   1        if(type ==2)
  144   1        {
  145   2          if(flag_end==1)
  146   2          {
  147   3                  go_motor(0,0);
  148   3            aim_speed =0;
  149   3            while(1)
  150   3            {
  151   4              speed_measure();      //ç¼–ç å™¨æµ‹é‡
  152   4              S_daoku += fabs(real_speed)*0.1;
  153   4              go_motor(-1500,-1500);
  154   4              ips114_showint16(0,3,S_daoku);
  155   4              BUZZ_ON;
  156   4              while(S_daoku>450)
  157   4              {
  158   5                speed_measure();      //ç¼–ç å™¨æµ‹é‡
  159   5                go_motor(1500,1500);
  160   5                S_daoku_2+= fabs(real_speed)*0.1;
  161   5                ips114_showint16(0,4,S_daoku_2);
  162   5                while(S_daoku_2>100)
  163   5                {
  164   6                  speed_measure();      //ç¼–ç å™¨æµ‹é‡
  165   6                  go_motor(2000,0);
  166   6                  S_daoku_3+= fabs(real_speed)*0.1;
  167   6                  ips114_showint16(0,5,S_daoku_3);
  168   6                  while(S_daoku_3>150)
  169   6                  { 
  170   7                   go_motor(0,0);
  171   7                   BUZZ_OFF;
  172   7                  }
  173   6                }
  174   5              }
  175   4            }
  176   3          }
  177   2       }
  178   1        
  179   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       776     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
C251 COMPILER V5.60.0,  park                                                               20/03/25  16:34:12  PAGE 4   

  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =        23     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        79     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
